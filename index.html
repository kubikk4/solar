<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Real-Time Solar System</title>
    <style>
        body { margin:0; background:#000; color:#fff; font-family:sans-serif; overflow:hidden; }
        canvas { display:block; margin:0 auto; background:#000; }
        #info { position:absolute; top:10px; left:10px; }
    </style>
</head>
<body>
<div id="info"></div>
<canvas id="solar" width="800" height="800"></canvas>
<script>
const canvas = document.getElementById('solar');
const ctx = canvas.getContext('2d');
const info = document.getElementById('info');
const centerX = canvas.width / 2;
const centerY = canvas.height / 2;

function deg2rad(d){ return d*Math.PI/180; }

const planets = [
  {
    name: 'Mercury',
    N: 48.3313, Nd: 3.24587e-5,
    i: 7.0047, id: 5e-8,
    w: 29.1241, wd: 1.01444e-5,
    a: 0.387098,
    e: 0.205635, ed: 5.59e-10,
    M: 168.6562, Md: 4.0923344368,
    color: '#b1b1b1',
    size: 2.5
  },
  {
    name: 'Venus',
    N: 76.6799, Nd: 2.46590e-5,
    i: 3.3946, id: 2.75e-8,
    w: 54.8910, wd: 1.38374e-5,
    a: 0.723330,
    e: 0.006773, ed: -1.302e-9,
    M: 48.0052, Md: 1.6021302244,
    color: '#e5c97d',
    size: 3.9
  },
  {
    name: 'Earth',
    N: 0.0, Nd: 0.0,
    i: 0.0, id: 0.0,
    w: 282.9404, wd: 4.70935e-5,
    a: 1.0,
    e: 0.016709, ed: -1.151e-9,
    M: 356.0470, Md: 0.9856002585,
    color: '#5f9df7',
    size: 4
  },
  {
    name: 'Mars',
    N: 49.5574, Nd: 2.11081e-5,
    i: 1.8497, id: -1.78e-8,
    w: 286.5016, wd: 2.92961e-5,
    a: 1.523688,
    e: 0.093405, ed: 2.516e-9,
    M: 18.6021, Md: 0.5240207766,
    color: '#cf5a3e',
    size: 2.9
  },
  {
    name: 'Jupiter',
    N: 100.4542, Nd: 2.76854e-5,
    i: 1.3030, id: -1.557e-7,
    w: 273.8777, wd: 1.64505e-5,
    a: 5.20256,
    e: 0.048498, ed: 4.469e-9,
    M: 19.8950, Md: 0.0830853001,
    color: '#d6b082',
    size: 13.4
  },
  {
    name: 'Saturn',
    N: 113.6634, Nd: 2.38980e-5,
    i: 2.4886, id: -1.081e-7,
    w: 339.3939, wd: 2.97661e-5,
    a: 9.55475,
    e: 0.055546, ed: -9.499e-9,
    M: 316.9670, Md: 0.0334442282,
    color: '#d8c48c',
    size: 12.3
  },
  {
    name: 'Uranus',
    N: 74.0005, Nd: 1.3978e-5,
    i: 0.7733, id: 1.9e-8,
    w: 96.6612, wd: 3.0565e-5,
    a: 19.18171, ad: -1.55e-8,
    e: 0.047318, ed: 7.45e-9,
    M: 142.5905, Md: 0.011725806,
    color: '#7ad7f0',
    size: 8
  },
  {
    name: 'Neptune',
    N: 131.7806, Nd: 3.0173e-5,
    i: 1.7700, id: -2.55e-7,
    w: 272.8461, wd: -6.027e-6,
    a: 30.05826, ad: 3.313e-8,
    e: 0.008606, ed: 2.15e-9,
    M: 260.2471, Md: 0.005995147,
    color: '#4976f3',
    size: 7.9
  }
];

const J2000 = Date.UTC(2000,0,1,12); // Jan 1 2000 12:00 UT
const startTime = Date.now(); // when simulation started

function kepler(M, e){
  let E = M;
  for(let i=0;i<5;i++){
    E = E - (E - e*Math.sin(E) - M)/(1 - e*Math.cos(E));
  }
  return E;
}

function position(p, d){
  const N = deg2rad(p.N + p.Nd*d);
  const i = deg2rad(p.i + p.id*d);
  const w = deg2rad(p.w + p.wd*d);
  const a = p.a + (p.ad || 0)*d;
  const e = p.e + p.ed*d;
  const M = deg2rad(p.M + p.Md*d);

  const E = kepler(M, e);
  const xv = a*(Math.cos(E) - e);
  const yv = a*Math.sqrt(1-e*e)*Math.sin(E);
  const v = Math.atan2(yv, xv);
  const r = Math.sqrt(xv*xv + yv*yv);

  const xh = r*(Math.cos(N)*Math.cos(v+w) - Math.sin(N)*Math.sin(v+w)*Math.cos(i));
  const yh = r*(Math.sin(N)*Math.cos(v+w) + Math.cos(N)*Math.sin(v+w)*Math.cos(i));

  return {x:xh, y:yh};
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const sunRadius = 40;
  const scale = 10;
  const offset = sunRadius + 20;

  ctx.fillStyle='yellow';
  ctx.beginPath();
  ctx.arc(centerX, centerY, sunRadius, 0, Math.PI*2); ctx.fill();

  ctx.font = '12px sans-serif';
  ctx.textBaseline = 'middle';

  const now = Date.now();
  const elapsed = now - startTime; // real time elapsed
  const speed = 172800; // simulation speed: 2 days per real second
  const d = elapsed / 86400000 * speed; // simulation days since J2000
  const simTime = J2000 + d * 86400000;
  const simDate = new Date(simTime);
  info.textContent = simDate.toISOString().slice(0, 10);
  planets.forEach(p=>{
    const pos = position(p,d);
    const r = Math.sqrt(pos.x*pos.x + pos.y*pos.y);
    const factor = (r*scale + offset)/r;
    const x = centerX + pos.x*factor;
    const y = centerY + pos.y*factor;
    ctx.fillStyle = p.color || 'white';
    ctx.beginPath();
    ctx.arc(x, y, p.size, 0, Math.PI*2);
    ctx.fill();
    ctx.fillStyle = '#fff';
    ctx.fillText(p.name, x + p.size + 4, y);
  });

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
